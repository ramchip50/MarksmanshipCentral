CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `modelview_categorycredits` AS select `m`.`id` AS `person_id`,`w`.`id` AS `weapon_id`,`m`.`lastname` AS `lastname`,`m`.`firstname` AS `firstname`,`w`.`name` AS `weapon`,`b`.`name` AS `branch`,sum(`p`.`credits`) AS `weaponcredits` from (((((`models_sessionparticipants` `p` join `models_person` `m` on(((`p`.`person_id` = `m`.`id`) and (`m`.`active` = 1)))) join `models_branch` `b` on(((`m`.`branch_id` = `b`.`id`) and (`b`.`active` = 1)))) join `models_session` `s` on(((`p`.`session_id` = `s`.`id`) and (`s`.`active` = 1) and (`s`.`flagged` = 0)))) join `models_game` `g` on(((`s`.`game_id` = `g`.`id`) and (`g`.`active` = 1) and (`g`.`verified` = 1)))) join `models_weapon` `w` on((`g`.`weapon_id` = `w`.`id`))) where (`p`.`active` = 1) group by `p`.`person_id`,`g`.`weapon_id`;
SELECT * FROM marksmanship_central.modelview_categorycredits;